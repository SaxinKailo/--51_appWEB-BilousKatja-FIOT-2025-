<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meal Planner</title>

  <style>
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#0e1324;
      color:#e9ecf5;
    }
    .container{max-width:1100px;margin:0 auto;padding:24px}
    h1,h2,h3{margin:0 0 12px}
    h1{font-size:36px}
    h2{font-size:24px}
    h3{font-size:18px}
    .muted{color:#b7c0dd}
    .btn{
      border:0;
      padding:10px 14px;
      border-radius:10px;
      background:#6c5cff;
      color:white;
      font-weight:600;
      cursor:pointer;
    }
    .btn.secondary{
      background:transparent;
      border:1px solid rgba(255,255,255,.2);
    }
    header{
      border-bottom:1px solid rgba(255,255,255,.15);
      padding:16px 0;
    }
    .hero{
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:28px;
      align-items:center;
    }
    .hero img{
      width:100%;
      height:380px;
      object-fit:cover;
      border-radius:16px;
    }
    section{margin-top:48px}
    .planner{
      display:grid;
      gap:10px;
    }
    .row{
      display:grid;
      grid-template-columns:80px 1fr 1fr;
      gap:10px;
      align-items:center;
      padding:10px;
      border:1px solid rgba(255,255,255,.15);
      border-radius:12px;
    }
    select{
      width:100%;
      padding:8px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.2);
      background:#121a34;
      color:white;
    }
    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
    }
    .card{
      border:1px solid rgba(255,255,255,.15);
      border-radius:14px;
      padding:16px;
    }
    .item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:8px 10px;
      border:1px solid rgba(255,255,255,.15);
      border-radius:10px;
      margin-bottom:8px;
    }
    label{display:flex;align-items:center;gap:8px}
    footer{
      margin-top:60px;
      padding:20px 0;
      border-top:1px solid rgba(255,255,255,.15);
      text-align:center;
      color:#b7c0dd;
    }
    @media(max-width:900px){
      .hero,.grid{grid-template-columns:1fr}
      .hero img{height:260px}
    }
  </style>
</head>

<body>
<header>
  <div class="container">
    <strong>üçΩ Meal Planner</strong>
  </div>
</header>

<main class="container">

  <section class="hero">
    <div>
      <h1>–ü–ª–∞–Ω—É–π —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</h1>
      <p class="muted">
        –û–±–µ—Ä–∏ —Å—Ç—Ä–∞–≤–∏, –≤—ñ–¥–º—ñ—Ç—å —â–æ –≤–∂–µ —î –≤–¥–æ–º–∞ ‚Äî
        —Ä–µ—à—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ñ–æ—Ä–º—É—î—Ç—å—Å—è —É —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫.
      </p>
    </div>
    <img src="images/mealprep-hero.jpg" alt="Weekly meal planning">
  </section>

  <section>
    <h2>–¢–∏–∂–Ω–µ–≤–∏–π –ø–ª–∞–Ω</h2>
    <div id="planner" class="planner"></div>
  </section>

  <section>
    <div class="grid">
      <div class="card">
        <h3>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏</h3>
        <div id="ingredients"></div>
      </div>

      <div class="card">
        <h3>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h3>
        <div id="shopping"></div>
        <button class="btn" id="emailBtn">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –Ω–∞ email</button>
      </div>
    </div>
  </section>

</main>

<footer>
  ¬© 2025 Meal Planner
</footer>

<script>
const MEALS={
  "–°–∞–ª–∞—Ç –∑ —Ç—É–Ω—Ü–µ–º":["–¢—É–Ω–µ—Ü—å","–õ–∏—Å—Ç—è —Å–∞–ª–∞—Ç—É","–û–≥—ñ—Ä–æ–∫","–ü–æ–º—ñ–¥–æ—Ä–∏"],
  "–ü–∞—Å—Ç–∞ –∑ –æ–≤–æ—á–∞–º–∏":["–ü–∞—Å—Ç–∞","–ü–µ—Ä–µ—Ü—å","–¶–∏–±—É–ª—è","–¢–æ–º–∞—Ç–Ω–∏–π —Å–æ—É—Å"],
  "–ì—Ä–µ—á–∫–∞ + –∫—É—Ä–∫–∞":["–ì—Ä–µ—á–∫–∞","–ö—É—Ä—è—á–µ —Ñ—ñ–ª–µ"],
  "–û–º–ª–µ—Ç –∑ —Å–∏—Ä–æ–º":["–Ø–π—Ü—è","–¢–≤–µ—Ä–¥–∏–π —Å–∏—Ä"],
  "–†–∏—Å –∑ –æ–≤–æ—á–∞–º–∏":["–†–∏—Å","–û–≤–æ—á—ñ"]
};

const DAYS=["–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±","–ù–¥"];
const plan=JSON.parse(localStorage.getItem("plan"))||{};
const have=JSON.parse(localStorage.getItem("have"))||{};

const plannerEl=document.getElementById("planner");
const ingEl=document.getElementById("ingredients");
const shopEl=document.getElementById("shopping");

function renderPlanner(){
  plannerEl.innerHTML="";
  DAYS.forEach(d=>{
    const row=document.createElement("div");
    row.className="row";
    row.innerHTML=`
      <strong>${d}</strong>
      <select data-day="${d}" data-slot="lunch">${options(plan[d]?.lunch)}</select>
      <select data-day="${d}" data-slot="dinner">${options(plan[d]?.dinner)}</select>
    `;
    plannerEl.appendChild(row);
  });
  plannerEl.querySelectorAll("select").forEach(s=>{
    s.onchange=()=>{
      const d=s.dataset.day;
      plan[d]=plan[d]||{};
      plan[d][s.dataset.slot]=s.value;
      localStorage.setItem("plan",JSON.stringify(plan));
      buildLists();
    };
  });
}

function options(selected){
  return `<option value="">‚Äî</option>`+
    Object.keys(MEALS).map(m=>
      `<option ${m===selected?"selected":""}>${m}</option>`
    ).join("");
}

function buildLists(){
  const map={};
  Object.values(plan).forEach(d=>{
    ["lunch","dinner"].forEach(t=>{
      const m=d?.[t];
      MEALS[m]?.forEach(i=>{
        map[i]=(map[i]||0)+1;
      });
    });
  });

  ingEl.innerHTML="";
  Object.entries(map).forEach(([i,c])=>{
    const k=i.toLowerCase();
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`
      <label>
        <input type="checkbox" ${have[k]?"checked":""}>
        ${i}
      </label>
      √ó${c}
    `;
    div.querySelector("input").onchange=e=>{
      have[k]=e.target.checked;
      localStorage.setItem("have",JSON.stringify(have));
      buildLists();
    };
    ingEl.appendChild(div);
  });

  shopEl.innerHTML="";
  Object.entries(map).forEach(([i,c])=>{
    if(!have[i.toLowerCase()]){
      const div=document.createElement("div");
      div.className="item";
      div.textContent=`${i} √ó${c}`;
      shopEl.appendChild(div);
    }
  });
}

document.getElementById("emailBtn").onclick=()=>{
  const items=[];
  shopEl.querySelectorAll(".item").forEach(i=>items.push(i.textContent));
  const body=encodeURIComponent("–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫:\n\n"+items.join("\n"));
  location.href=`mailto:?subject=–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫&body=${body}`;
};

renderPlanner();
buildLists();
</script>
</body>
</html>
